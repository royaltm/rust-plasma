"use strict";(self.webpackChunkplasmaLoader=self.webpackChunkplasmaLoader||[]).push([[958],{714:(e,_,t)=>{t.d(_,{u:()=>r,w:()=>n});var a=t(215);const n={width:256,height:256};class r extends a.b{constructor(e,_){super(),Object.assign(this,n,_),this.target=e,this.ctx=e.getContext("2d"),this.spool=[],this.readyHandler=()=>{var e=this.spool;0!==e.length&&(this.spool=[]),requestAnimationFrame((_=>{if(this.isAnimating){var{ctx:t,target:a}=this,{width:n,height:r}=this,{width:i,height:c}=a;e.forEach((({x:e,y:_,width:a,height:s,bitmap:b})=>{for(var{width:d,height:o}=b,g=n/a,w=r/s,l=d*g>>>0,m=o*w>>>0,h=_*w>>>0;h<c;h+=r)for(var p=e*g>>>0;p<i;p+=n)t.drawImage(b,0,0,d,o,p,h,l,m);b.close()}));var s=this.generator;s&&s.render()}else e.forEach((({bitmap:e})=>e.close()))}))},this.bitmapHandler=e=>{this.spool.push(e.detail)}}}},434:(e,_,t)=>{t.a(e,(async(e,a)=>{try{t.d(_,{$:()=>i,O:()=>c});var n=t(146),r=e([n]);n=(r.then?(await r)():r)[0];const i={minSteps:80,maxSteps:200,width:128,height:128,parallel:!0,workerUrl:"worker.js",workers:Math.min(2,Math.max(1,0|self.navigator.hardwareConcurrency))};class c extends EventTarget{constructor(e){const _=Object.assign({},i,e);super();const t=this.handle=new n.di(_.width,_.height,_.minSteps,_.maxSteps);if(this.workers=[],this.queued=-1,this.imageData=null,_.parallel){const[e,a]=[t.width(),t.height()],n=Math.max(1,Math.min(a,_.workers)),r=(a+n-1)/n>>>0;Array.from({length:n},(()=>new Worker(_.workerUrl))).forEach(((_,i)=>{const c=i*r,s={width:e,height:a,minSteps:t.minSteps(),maxSteps:t.maxSteps(),x:0,y:c,w:e,h:Math.min(r,a-c)};_.onmessage=r=>{const i=r.data;if("ready"===i)_.postMessage(s),this.workers.push(_)==n&&(this.queued=0,this.dispatchEvent(new Event("ready")));else if(i instanceof ImageBitmap){let _={x:0,y:c,width:e,height:a,bitmap:i};this.dispatchEvent(new CustomEvent("bitmap",{detail:_})),0==--this.queued&&(t.update(),this.dispatchEvent(new Event("ready")))}else this.dispatchEvent(new CustomEvent("error",{detail:new Error("Unknown message from worker")}))}}))}else setTimeout((()=>{this.queued=0,this.imageData=t.imageData(),this.dispatchEvent(new Event("ready"))}),1)}get isReady(){return 0===this.queued}render(){if(0!==this.queued)return!1;const e=this.workers;let _=e.length;const t=this.handle;if(_>0){this.queued=_;let{buffer:a}=t.exportPhaseAmps();e.forEach(((e,t)=>{let n=t+1<_?a.slice(0):a;e.postMessage(n,[n])}))}else{this.queued=-1,t.render();let e=this.imageData;0===e.data.byteLength&&(e=this.imageData=t.imageData()),e=new ImageData(new Uint8ClampedArray(e.data),e.width,e.height),createImageBitmap(e).then((e=>{let{width:_,height:a}=e,n={x:0,y:0,width:_,height:a,bitmap:e};this.dispatchEvent(new CustomEvent("bitmap",{detail:n})),t.update(),this.queued=0,this.dispatchEvent(new Event("ready"))}),(e=>{this.dispatchEvent(new CustomEvent("error",{detail:e}))}))}return!0}}a()}catch(e){a(e)}}))},958:(e,_,t)=>{t.a(e,(async(e,a)=>{try{t.r(_),t.d(_,{BaseRenderer:()=>i.b,CanvasRenderer:()=>c.u,DefaultCanvasRendererOptions:()=>c.w,DefaultPlasmaGeneratorOptions:()=>r.$,PlasmaGenerator:()=>r.O,PlasmaHandle:()=>n.di,TextureRenderer:()=>s.p});var n=t(146),r=t(434),i=t(215),c=t(714),s=t(199),b=e([n,r]);[n,r]=b.then?(await b)():b,a()}catch(e){a(e)}}))},215:(e,_,t)=>{t.d(_,{b:()=>a});class a{constructor(){this.isAnimating=!1,this.generator=null}attach(e){this.animate(!1),this.detach(),this.generator=e,e.addEventListener("ready",this.readyHandler,!1),e.addEventListener("bitmap",this.bitmapHandler,!1)}detach(){var e=this.generator;return e&&(this.animate(!1),e.removeEventListener("ready",this.readyHandler,!1),e.removeEventListener("bitmap",this.bitmapHandler,!1)),this.generator=null,e}animate(e){if(!e!=!this.isAnimating)if(e){this.isAnimating=!0;let e=this.generator;e&&e.isReady&&e.render()}else this.isAnimating=!1}}},199:(e,_,t)=>{t.d(_,{p:()=>n});var a=t(215);class n extends a.b{constructor(e){super(),this.target=e,this.bitmap=null,this.canvas=null,this.ctx=null,this.readyHandler=()=>{requestAnimationFrame((e=>{var{bitmap:_,canvas:t,target:a}=this,n=a.image;if(this.isAnimating){null===_&&null===t||(null!==_?(this.bitmap=null,a.image=_):a.image=t.transferToImageBitmap(),a.needsUpdate=!0,n instanceof ImageBitmap&&n.close());var r=this.generator;r&&r.render()}else null!==_&&(_.close(),this.bitmap=null)}))},this.bitmapHandler=e=>{var{x:_,y:t,width:a,height:n,bitmap:r}=e.detail;if(a===r.width&&n===r.height)this.bitmap=r;else{let{canvas:e,ctx:i}=this;null!=e&&e.width===a&&e.height===n||(e=this.canvas=new OffscreenCanvas(a,n),i=this.ctx=e.getContext("2d")),i.drawImage(r,_,t),r.close()}}}}},146:(e,_,t)=>{t.a(e,(async(e,a)=>{try{t.d(_,{di:()=>r.di});var n=t(203),r=t(612),i=e([n,r]);[n,r]=i.then?(await i)():i,a()}catch(e){a(e)}}))},612:(module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.a(module,(async(__webpack_handle_async_dependencies__,__webpack_async_result__)=>{try{__webpack_require__.d(__webpack_exports__,{$L:()=>__wbg_globalThis_7f206bda628d5286,A$:()=>__wbg_createImageBitmap_7ed780ca2d91ae09,AX:()=>__wbg_eval_6dc8993472839847,DI:()=>__wbg_process_038c26bf42b093f8,HT:()=>__wbindgen_boolean_get,Ni:()=>__wbg_call_97ae9d8645dc388b,Nk:()=>__wbg_crypto_e1d53a1d73fb10b8,Or:()=>__wbindgen_throw,QT:()=>__wbg_versions_ab37218d2f0b24a8,RP:()=>__wbg_createImageBitmap_1717dd77aea442b3,Sn:()=>__wbg_window_f2557cc78490aceb,VD:()=>__wbg_call_168da88779e35f61,Wl:()=>__wbindgen_is_object,XP:()=>__wbindgen_is_undefined,bj:()=>__wbg_length_9e1ae1900cb0fbd5,cE:()=>__wbg_instanceof_Window_acc97ff9f5d2c7b4,cr:()=>__wbg_msCrypto_6e7d3e1f92610cbb,di:()=>PlasmaHandle,e:()=>__wbg_getRandomValues_805f1c3d65988a5a,eY:()=>__wbindgen_is_string,ex:()=>__wbg_randomFillSync_6894564c2c334c42,f5:()=>__wbg_node_080f4b19d15bc1fe,fP:()=>__wbg_set_83db9690f9353e79,gW:()=>__wbg_newnoargs_b5b063fc6c2f0376,go:()=>__wbg_require_78a3dcfbdba9cbce,gp:()=>__wbg_new_8d2af00bc1e329ee,h4:()=>__wbindgen_string_new,ib:()=>__wbg_newwithlength_f5933855e4f48a19,jp:()=>__wbg_buffer_3f3d764d4747d564,kH:()=>__wbg_subarray_58ad4efbb5bcb886,lB:()=>__wbg_new_8c3f0052272a457a,m_:()=>__wbindgen_object_clone_ref,o$:()=>__wbindgen_is_function,oH:()=>__wbindgen_memory,pH:()=>__wbg_instanceof_WorkerGlobalScope_16bb97a4549a3f21,ug:()=>__wbindgen_object_drop_ref,wJ:()=>__wbg_global_ba75c50d1cf384f4,yB:()=>__wbg_self_6d479506f72c6a71,zE:()=>__wbg_newwithu8clampedarray_ec4b349a9ae3eaf6});var _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(203);module=__webpack_require__.hmd(module);var __webpack_async_dependencies__=__webpack_handle_async_dependencies__([_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__]);_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__=(__webpack_async_dependencies__.then?(await __webpack_async_dependencies__)():__webpack_async_dependencies__)[0];const heap=new Array(32).fill(void 0);function getObject(e){return heap[e]}heap.push(void 0,null,!0,!1);let heap_next=heap.length;function dropObject(e){e<36||(heap[e]=heap_next,heap_next=e)}function takeObject(e){const _=getObject(e);return dropObject(e),_}const lTextDecoder="undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder;let cachedTextDecoder=new lTextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();let cachedUint8Memory0=new Uint8Array;function getUint8Memory0(){return 0===cachedUint8Memory0.byteLength&&(cachedUint8Memory0=new Uint8Array(_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer)),cachedUint8Memory0}function getStringFromWasm0(e,_){return cachedTextDecoder.decode(getUint8Memory0().subarray(e,e+_))}function addHeapObject(e){heap_next===heap.length&&heap.push(heap.length+1);const _=heap_next;return heap_next=heap[_],heap[_]=e,_}let cachedInt32Memory0=new Int32Array;function getInt32Memory0(){return 0===cachedInt32Memory0.byteLength&&(cachedInt32Memory0=new Int32Array(_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer)),cachedInt32Memory0}let cachedFloat32Memory0=new Float32Array;function getFloat32Memory0(){return 0===cachedFloat32Memory0.byteLength&&(cachedFloat32Memory0=new Float32Array(_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer)),cachedFloat32Memory0}let WASM_VECTOR_LEN=0;function passArrayF32ToWasm0(e,_){const t=_(4*e.length);return getFloat32Memory0().set(e,t/4),WASM_VECTOR_LEN=e.length,t}function getArrayF32FromWasm0(e,_){return getFloat32Memory0().subarray(e/4,e/4+_)}function handleError(e,_){try{return e.apply(this,_)}catch(e){_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_exn_store(addHeapObject(e))}}let cachedUint8ClampedMemory0=new Uint8ClampedArray;function getUint8ClampedMemory0(){return 0===cachedUint8ClampedMemory0.byteLength&&(cachedUint8ClampedMemory0=new Uint8ClampedArray(_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory.buffer)),cachedUint8ClampedMemory0}function getClampedArrayU8FromWasm0(e,_){return getUint8ClampedMemory0().subarray(e/1,e/1+_)}function getArrayU8FromWasm0(e,_){return getUint8Memory0().subarray(e/1,e/1+_)}class PlasmaHandle{static __wrap(e){const _=Object.create(PlasmaHandle.prototype);return _.ptr=e,_}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbg_plasmahandle_free(e)}constructor(e,_,t,a){try{const i=_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_constructor(i,e,_,t,a);var n=getInt32Memory0()[i/4+0],r=getInt32Memory0()[i/4+1];if(getInt32Memory0()[i/4+2])throw takeObject(r);return PlasmaHandle.__wrap(n)}finally{_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16)}}setArea(e,_,t,a){_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_setArea(this.ptr,e,_,t,a)}width(){return _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_width(this.ptr)>>>0}height(){return _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_height(this.ptr)>>>0}render(){_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_render(this.ptr)}renderPhaseAmps(e){const _=passArrayF32ToWasm0(e,_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc),t=WASM_VECTOR_LEN;_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_renderPhaseAmps(this.ptr,_,t)}update(){_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_update(this.ptr)}imageData(){try{const t=_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_imageData(t,this.ptr);var e=getInt32Memory0()[t/4+0],_=getInt32Memory0()[t/4+1];if(getInt32Memory0()[t/4+2])throw takeObject(_);return takeObject(e)}finally{_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16)}}createImageBitmap(){try{const t=_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_createImageBitmap(t,this.ptr);var e=getInt32Memory0()[t/4+0],_=getInt32Memory0()[t/4+1];if(getInt32Memory0()[t/4+2])throw takeObject(_);return takeObject(e)}finally{_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16)}}exportPhaseAmps(){try{const a=_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(-16);_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_exportPhaseAmps(a,this.ptr);var e=getInt32Memory0()[a/4+0],_=getInt32Memory0()[a/4+1],t=getArrayF32FromWasm0(e,_).slice();return _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_free(e,4*_),t}finally{_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_add_to_stack_pointer(16)}}importPhaseAmps(e){const _=passArrayF32ToWasm0(e,_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.__wbindgen_malloc),t=WASM_VECTOR_LEN;_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_importPhaseAmps(this.ptr,_,t)}minSteps(){return _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_minSteps(this.ptr)}maxSteps(){return _plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.plasmahandle_maxSteps(this.ptr)}}function __wbindgen_boolean_get(e){const _=getObject(e);return"boolean"==typeof _?_?1:0:2}function __wbindgen_object_drop_ref(e){takeObject(e)}function __wbg_instanceof_Window_acc97ff9f5d2c7b4(e){let _;try{_=getObject(e)instanceof Window}catch{_=!1}return _}function __wbg_createImageBitmap_7ed780ca2d91ae09(){return handleError((function(e,_){return addHeapObject(getObject(e).createImageBitmap(getObject(_)))}),arguments)}function __wbg_instanceof_WorkerGlobalScope_16bb97a4549a3f21(e){let _;try{_=getObject(e)instanceof WorkerGlobalScope}catch{_=!1}return _}function __wbg_createImageBitmap_1717dd77aea442b3(){return handleError((function(e,_){return addHeapObject(getObject(e).createImageBitmap(getObject(_)))}),arguments)}function __wbg_newwithu8clampedarray_ec4b349a9ae3eaf6(){return handleError((function(e,_,t){return addHeapObject(new ImageData(getClampedArrayU8FromWasm0(e,_),t>>>0))}),arguments)}function __wbg_crypto_e1d53a1d73fb10b8(e){return addHeapObject(getObject(e).crypto)}function __wbindgen_is_object(e){const _=getObject(e);return"object"==typeof _&&null!==_}function __wbg_process_038c26bf42b093f8(e){return addHeapObject(getObject(e).process)}function __wbg_versions_ab37218d2f0b24a8(e){return addHeapObject(getObject(e).versions)}function __wbg_node_080f4b19d15bc1fe(e){return addHeapObject(getObject(e).node)}function __wbindgen_is_string(e){return"string"==typeof getObject(e)}function __wbg_msCrypto_6e7d3e1f92610cbb(e){return addHeapObject(getObject(e).msCrypto)}function __wbg_require_78a3dcfbdba9cbce(){return handleError((function(){return addHeapObject(module.require)}),arguments)}function __wbindgen_is_function(e){return"function"==typeof getObject(e)}function __wbindgen_string_new(e,_){return addHeapObject(getStringFromWasm0(e,_))}function __wbg_getRandomValues_805f1c3d65988a5a(){return handleError((function(e,_){getObject(e).getRandomValues(getObject(_))}),arguments)}function __wbg_randomFillSync_6894564c2c334c42(){return handleError((function(e,_,t){getObject(e).randomFillSync(getArrayU8FromWasm0(_,t))}),arguments)}function __wbg_newnoargs_b5b063fc6c2f0376(e,_){return addHeapObject(new Function(getStringFromWasm0(e,_)))}function __wbg_call_97ae9d8645dc388b(){return handleError((function(e,_){return addHeapObject(getObject(e).call(getObject(_)))}),arguments)}function __wbindgen_object_clone_ref(e){return addHeapObject(getObject(e))}function __wbg_self_6d479506f72c6a71(){return handleError((function(){return addHeapObject(self.self)}),arguments)}function __wbg_window_f2557cc78490aceb(){return handleError((function(){return addHeapObject(window.window)}),arguments)}function __wbg_globalThis_7f206bda628d5286(){return handleError((function(){return addHeapObject(globalThis.globalThis)}),arguments)}function __wbg_global_ba75c50d1cf384f4(){return handleError((function(){return addHeapObject(__webpack_require__.g.global)}),arguments)}function __wbindgen_is_undefined(e){return void 0===getObject(e)}function __wbg_eval_6dc8993472839847(){return handleError((function(arg0,arg1){const ret=eval(getStringFromWasm0(arg0,arg1));return addHeapObject(ret)}),arguments)}function __wbg_new_8d2af00bc1e329ee(e,_){return addHeapObject(new Error(getStringFromWasm0(e,_)))}function __wbg_call_168da88779e35f61(){return handleError((function(e,_,t){return addHeapObject(getObject(e).call(getObject(_),getObject(t)))}),arguments)}function __wbg_buffer_3f3d764d4747d564(e){return addHeapObject(getObject(e).buffer)}function __wbg_new_8c3f0052272a457a(e){return addHeapObject(new Uint8Array(getObject(e)))}function __wbg_set_83db9690f9353e79(e,_,t){getObject(e).set(getObject(_),t>>>0)}function __wbg_length_9e1ae1900cb0fbd5(e){return getObject(e).length}function __wbg_newwithlength_f5933855e4f48a19(e){return addHeapObject(new Uint8Array(e>>>0))}function __wbg_subarray_58ad4efbb5bcb886(e,_,t){return addHeapObject(getObject(e).subarray(_>>>0,t>>>0))}function __wbindgen_throw(e,_){throw new Error(getStringFromWasm0(e,_))}function __wbindgen_memory(){return addHeapObject(_plasma_web_bg_wasm__WEBPACK_IMPORTED_MODULE_0__.memory)}__webpack_async_result__()}catch(e){__webpack_async_result__(e)}}))},203:(e,_,t)=>{t.a(e,(async(a,n)=>{try{var r,i=a([r=t(612)]),[r]=i.then?(await i)():i;await t.v(_,e.id,"9ccdc3610b08d4513caf",{"./plasma_web_bg.js":{__wbindgen_boolean_get:r.HT,__wbindgen_object_drop_ref:r.ug,__wbg_instanceof_Window_acc97ff9f5d2c7b4:r.cE,__wbg_createImageBitmap_7ed780ca2d91ae09:r.A$,__wbg_instanceof_WorkerGlobalScope_16bb97a4549a3f21:r.pH,__wbg_createImageBitmap_1717dd77aea442b3:r.RP,__wbg_newwithu8clampedarray_ec4b349a9ae3eaf6:r.zE,__wbg_crypto_e1d53a1d73fb10b8:r.Nk,__wbindgen_is_object:r.Wl,__wbg_process_038c26bf42b093f8:r.DI,__wbg_versions_ab37218d2f0b24a8:r.QT,__wbg_node_080f4b19d15bc1fe:r.f5,__wbindgen_is_string:r.eY,__wbg_msCrypto_6e7d3e1f92610cbb:r.cr,__wbg_require_78a3dcfbdba9cbce:r.go,__wbindgen_is_function:r.o$,__wbindgen_string_new:r.h4,__wbg_getRandomValues_805f1c3d65988a5a:r.e,__wbg_randomFillSync_6894564c2c334c42:r.ex,__wbg_newnoargs_b5b063fc6c2f0376:r.gW,__wbg_call_97ae9d8645dc388b:r.Ni,__wbindgen_object_clone_ref:r.m_,__wbg_self_6d479506f72c6a71:r.yB,__wbg_window_f2557cc78490aceb:r.Sn,__wbg_globalThis_7f206bda628d5286:r.$L,__wbg_global_ba75c50d1cf384f4:r.wJ,__wbindgen_is_undefined:r.XP,__wbg_eval_6dc8993472839847:r.AX,__wbg_new_8d2af00bc1e329ee:r.gp,__wbg_call_168da88779e35f61:r.VD,__wbg_buffer_3f3d764d4747d564:r.jp,__wbg_new_8c3f0052272a457a:r.lB,__wbg_set_83db9690f9353e79:r.fP,__wbg_length_9e1ae1900cb0fbd5:r.bj,__wbg_newwithlength_f5933855e4f48a19:r.ib,__wbg_subarray_58ad4efbb5bcb886:r.kH,__wbindgen_throw:r.Or,__wbindgen_memory:r.oH}}),n()}catch(e){n(e)}}),1)}}]);