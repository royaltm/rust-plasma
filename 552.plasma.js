"use strict";(self.webpackChunkplasmaLoader=self.webpackChunkplasmaLoader||[]).push([[552],{502:(e,t,a)=>{a.d(t,{K:()=>_,P:()=>r});var n=a(301);const r={width:256,height:256};class _ extends n.R{constructor(e,t){super(),Object.assign(this,r,t),this.target=e,this.ctx=e.getContext("2d"),this.spool=[],this.readyHandler=()=>{var e=this.spool;0!==e.length&&(this.spool=[]),requestAnimationFrame((t=>{if(this.isAnimating){var{ctx:a,target:n}=this,{width:r,height:_}=this,{width:i,height:c}=n;e.forEach((({x:e,y:t,width:n,height:s,bitmap:o})=>{for(var{width:d,height:b}=o,g=r/n,w=_/s,h=d*g>>>0,l=b*w>>>0,m=t*w>>>0;m<c;m+=_)for(var u=e*g>>>0;u<i;u+=r)a.drawImage(o,0,0,d,b,u,m,h,l);o.close()}));var s=this.generator;s&&s.render()}else e.forEach((({bitmap:e})=>e.close()))}))},this.bitmapHandler=e=>{this.spool.push(e.detail)}}}},369:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K:()=>c,t:()=>i});var r=a(250),_=e([r]);r=(_.then?(await _)():_)[0];const i={minSteps:80,maxSteps:200,width:128,height:128,parallel:!0,workerUrl:"worker.js",workers:Math.min(2,Math.max(1,0|self.navigator.hardwareConcurrency))};class c extends EventTarget{constructor(e){const t=Object.assign({},i,e);super();const a=this.handle=new r.HB(t.width,t.height,t.minSteps,t.maxSteps);if(this.workers=[],this.queued=-1,this.imageData=null,t.parallel){const[e,n]=[a.width(),a.height()],r=Math.max(1,Math.min(n,t.workers)),_=(n+r-1)/r>>>0;Array.from({length:r},(()=>new Worker(t.workerUrl))).forEach(((t,i)=>{const c=i*_,s={width:e,height:n,minSteps:a.minSteps(),maxSteps:a.maxSteps(),x:0,y:c,w:e,h:Math.min(_,n-c)};t.onmessage=_=>{const i=_.data;if("ready"===i)t.postMessage(s),this.workers.push(t)==r&&(this.queued=0,this.dispatchEvent(new Event("ready")));else if(i instanceof ImageBitmap){let t={x:0,y:c,width:e,height:n,bitmap:i};this.dispatchEvent(new CustomEvent("bitmap",{detail:t})),0==--this.queued&&(a.update(),this.dispatchEvent(new Event("ready")))}else this.dispatchEvent(new CustomEvent("error",{detail:new Error("Unknown message from worker")}))}}))}else setTimeout((()=>{this.queued=0,this.imageData=a.imageData(),this.dispatchEvent(new Event("ready"))}),1)}get isReady(){return 0===this.queued}render(){if(0!==this.queued)return!1;const e=this.workers;let t=e.length;const a=this.handle;if(t>0){this.queued=t;let{buffer:n}=a.exportPhaseAmps();e.forEach(((e,a)=>{let r=a+1<t?n.slice(0):n;e.postMessage(r,[r])}))}else{this.queued=-1,a.render();let e=this.imageData;0===e.data.byteLength&&(e=this.imageData=a.imageData()),e=new ImageData(new Uint8ClampedArray(e.data),e.width,e.height),createImageBitmap(e).then((e=>{let{width:t,height:n}=e,r={x:0,y:0,width:t,height:n,bitmap:e};this.dispatchEvent(new CustomEvent("bitmap",{detail:r})),a.update(),this.queued=0,this.dispatchEvent(new Event("ready"))}),(e=>{this.dispatchEvent(new CustomEvent("error",{detail:e}))}))}return!0}}n()}catch(e){n(e)}}))},552:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.r(t),a.d(t,{BaseRenderer:()=>i.R,CanvasRenderer:()=>c.K,DefaultCanvasRendererOptions:()=>c.P,DefaultPlasmaGeneratorOptions:()=>_.t,PlasmaGenerator:()=>_.K,PlasmaHandle:()=>r.HB,TextureRenderer:()=>s.X});var r=a(250),_=a(369),i=a(301),c=a(502),s=a(808),o=e([r,_]);[r,_]=o.then?(await o)():o,n()}catch(e){n(e)}}))},301:(e,t,a)=>{a.d(t,{R:()=>n});class n{constructor(){this.isAnimating=!1,this.generator=null}attach(e){this.animate(!1),this.detach(),this.generator=e,e.addEventListener("ready",this.readyHandler,!1),e.addEventListener("bitmap",this.bitmapHandler,!1)}detach(){var e=this.generator;return e&&(this.animate(!1),e.removeEventListener("ready",this.readyHandler,!1),e.removeEventListener("bitmap",this.bitmapHandler,!1)),this.generator=null,e}animate(e){if(!e!=!this.isAnimating)if(e){this.isAnimating=!0;let e=this.generator;e&&e.isReady&&e.render()}else this.isAnimating=!1}}},808:(e,t,a)=>{a.d(t,{X:()=>r});var n=a(301);class r extends n.R{constructor(e){super(),this.target=e,this.bitmap=null,this.canvas=null,this.ctx=null,this.readyHandler=()=>{requestAnimationFrame((e=>{var{bitmap:t,canvas:a,target:n}=this,r=n.image;if(this.isAnimating){null===t&&null===a||(null!==t?(this.bitmap=null,n.image=t):n.image=a.transferToImageBitmap(),n.needsUpdate=!0,r instanceof ImageBitmap&&r.close());var _=this.generator;_&&_.render()}else null!==t&&(t.close(),this.bitmap=null)}))},this.bitmapHandler=e=>{var{x:t,y:a,width:n,height:r,bitmap:_}=e.detail;if(n===_.width&&r===_.height)this.bitmap=_;else{let{canvas:e,ctx:i}=this;null!=e&&e.width===n&&e.height===r||(e=this.canvas=new OffscreenCanvas(n,r),i=this.ctx=e.getContext("2d")),i.drawImage(_,t,a),_.close()}}}}},250:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{HB:()=>_.HB});var r=a(466),_=a(310),i=e([r]);r=(i.then?(await i)():i)[0],(0,_.lI)(r),n()}catch(e){n(e)}}))},310:(module,__webpack_exports__,__webpack_require__)=>{let wasm;function __wbg_set_wasm(e){wasm=e}__webpack_require__.d(__webpack_exports__,{BZ:()=>__wbindgen_object_clone_ref,D1:()=>__wbg_versions_f686565e586dd935,DI:()=>__wbg_buffer_b7b08af79b0b0974,EP:()=>__wbg_new_796382978dfd4fb0,FJ:()=>__wbg_set_d1e79e2388520f18,Gu:()=>__wbindgen_is_string,HB:()=>PlasmaHandle,J1:()=>__wbg_call_89af060b4e1523f2,KN:()=>__wbg_self_3093d5d1f7bcb682,Mq:()=>__wbg_new_ea1883e1e5e86686,NL:()=>__wbg_node_104a2ff8d6ea03a2,Nh:()=>__wbindgen_boolean_get,O9:()=>__wbg_window_3bcfc4d31bc012f8,OL:()=>__wbg_newwithlength_ec548f448387c968,PR:()=>__wbindgen_is_function,Py:()=>__wbindgen_memory,Qn:()=>__wbindgen_throw,Ti:()=>__wbg_eval_6e4fc17d87772f52,VF:()=>__wbg_getRandomValues_3aa56aa6edec874c,X5:()=>__wbg_instanceof_WorkerGlobalScope_e34c8a505711a78e,ZY:()=>__wbg_newwithu8clampedarray_6b29095634b7e758,bk:()=>__wbindgen_object_drop_ref,cA:()=>__wbg_process_4a72847cc503995b,cl:()=>__wbg_msCrypto_eb05e62b530a1508,hH:()=>__wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9,hW:()=>__wbg_randomFillSync_5c9c955aa56b6049,h_:()=>__wbg_crypto_1d1f22824a6a080c,jF:()=>__wbg_global_e5a3fe56f8be9485,lI:()=>__wbg_set_wasm,nq:()=>__wbg_subarray_7c2e3576afe181d1,qv:()=>__wbindgen_is_object,s:()=>__wbg_require_cca90b1a94a0255b,t5:()=>__wbg_createImageBitmap_b7c7bb61272dc716,tM:()=>__wbg_call_1084a111329e68ce,tn:()=>__wbg_globalThis_86b222e13bdf32ed,uw:()=>__wbg_instanceof_Window_5012736c80a01584,vU:()=>__wbindgen_is_undefined,xN:()=>__wbg_newnoargs_76313bd6ff35d0f2,yc:()=>__wbindgen_string_new,zR:()=>__wbg_createImageBitmap_c278e73aea088356}),module=__webpack_require__.hmd(module);const heap=new Array(128).fill(void 0);function getObject(e){return heap[e]}heap.push(void 0,null,!0,!1);let heap_next=heap.length;function dropObject(e){e<132||(heap[e]=heap_next,heap_next=e)}function takeObject(e){const t=getObject(e);return dropObject(e),t}const lTextDecoder="undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder;let cachedTextDecoder=new lTextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});cachedTextDecoder.decode();let cachedUint8ArrayMemory0=null;function getUint8ArrayMemory0(){return null!==cachedUint8ArrayMemory0&&0!==cachedUint8ArrayMemory0.byteLength||(cachedUint8ArrayMemory0=new Uint8Array(wasm.memory.buffer)),cachedUint8ArrayMemory0}function getStringFromWasm0(e,t){return e>>>=0,cachedTextDecoder.decode(getUint8ArrayMemory0().subarray(e,e+t))}function addHeapObject(e){heap_next===heap.length&&heap.push(heap.length+1);const t=heap_next;return heap_next=heap[t],heap[t]=e,t}let cachedDataViewMemory0=null;function getDataViewMemory0(){return(null===cachedDataViewMemory0||!0===cachedDataViewMemory0.buffer.detached||void 0===cachedDataViewMemory0.buffer.detached&&cachedDataViewMemory0.buffer!==wasm.memory.buffer)&&(cachedDataViewMemory0=new DataView(wasm.memory.buffer)),cachedDataViewMemory0}let cachedFloat32ArrayMemory0=null;function getFloat32ArrayMemory0(){return null!==cachedFloat32ArrayMemory0&&0!==cachedFloat32ArrayMemory0.byteLength||(cachedFloat32ArrayMemory0=new Float32Array(wasm.memory.buffer)),cachedFloat32ArrayMemory0}let WASM_VECTOR_LEN=0;function passArrayF32ToWasm0(e,t){const a=t(4*e.length,4)>>>0;return getFloat32ArrayMemory0().set(e,a/4),WASM_VECTOR_LEN=e.length,a}function getArrayF32FromWasm0(e,t){return e>>>=0,getFloat32ArrayMemory0().subarray(e/4,e/4+t)}function handleError(e,t){try{return e.apply(this,t)}catch(e){wasm.__wbindgen_export_2(addHeapObject(e))}}let cachedUint8ClampedArrayMemory0=null;function getUint8ClampedArrayMemory0(){return null!==cachedUint8ClampedArrayMemory0&&0!==cachedUint8ClampedArrayMemory0.byteLength||(cachedUint8ClampedArrayMemory0=new Uint8ClampedArray(wasm.memory.buffer)),cachedUint8ClampedArrayMemory0}function getClampedArrayU8FromWasm0(e,t){return e>>>=0,getUint8ClampedArrayMemory0().subarray(e/1,e/1+t)}const PlasmaHandleFinalization="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>wasm.__wbg_plasmahandle_free(e>>>0,1)));class PlasmaHandle{__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,PlasmaHandleFinalization.unregister(this),e}free(){const e=this.__destroy_into_raw();wasm.__wbg_plasmahandle_free(e,0)}constructor(e,t,a,n){try{const i=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.plasmahandle_constructor(i,e,t,a,n);var r=getDataViewMemory0().getInt32(i+0,!0),_=getDataViewMemory0().getInt32(i+4,!0);if(getDataViewMemory0().getInt32(i+8,!0))throw takeObject(_);return this.__wbg_ptr=r>>>0,PlasmaHandleFinalization.register(this,this.__wbg_ptr,this),this}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}setArea(e,t,a,n){wasm.plasmahandle_setArea(this.__wbg_ptr,e,t,a,n)}width(){return wasm.plasmahandle_width(this.__wbg_ptr)>>>0}height(){return wasm.plasmahandle_height(this.__wbg_ptr)>>>0}render(){wasm.plasmahandle_render(this.__wbg_ptr)}renderPhaseAmps(e){const t=passArrayF32ToWasm0(e,wasm.__wbindgen_export_0),a=WASM_VECTOR_LEN;wasm.plasmahandle_renderPhaseAmps(this.__wbg_ptr,t,a)}update(){wasm.plasmahandle_update(this.__wbg_ptr)}imageData(){try{const a=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.plasmahandle_imageData(a,this.__wbg_ptr);var e=getDataViewMemory0().getInt32(a+0,!0),t=getDataViewMemory0().getInt32(a+4,!0);if(getDataViewMemory0().getInt32(a+8,!0))throw takeObject(t);return takeObject(e)}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}createImageBitmap(){try{const a=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.plasmahandle_createImageBitmap(a,this.__wbg_ptr);var e=getDataViewMemory0().getInt32(a+0,!0),t=getDataViewMemory0().getInt32(a+4,!0);if(getDataViewMemory0().getInt32(a+8,!0))throw takeObject(t);return takeObject(e)}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}exportPhaseAmps(){try{const n=wasm.__wbindgen_add_to_stack_pointer(-16);wasm.plasmahandle_exportPhaseAmps(n,this.__wbg_ptr);var e=getDataViewMemory0().getInt32(n+0,!0),t=getDataViewMemory0().getInt32(n+4,!0),a=getArrayF32FromWasm0(e,t).slice();return wasm.__wbindgen_export_1(e,4*t,4),a}finally{wasm.__wbindgen_add_to_stack_pointer(16)}}importPhaseAmps(e){const t=passArrayF32ToWasm0(e,wasm.__wbindgen_export_0),a=WASM_VECTOR_LEN;wasm.plasmahandle_importPhaseAmps(this.__wbg_ptr,t,a)}minSteps(){return wasm.plasmahandle_minSteps(this.__wbg_ptr)}maxSteps(){return wasm.plasmahandle_maxSteps(this.__wbg_ptr)}}function __wbindgen_object_drop_ref(e){takeObject(e)}function __wbindgen_boolean_get(e){const t=getObject(e);return"boolean"==typeof t?t?1:0:2}function __wbg_instanceof_Window_5012736c80a01584(e){let t;try{t=getObject(e)instanceof Window}catch(e){t=!1}return t}function __wbg_createImageBitmap_b7c7bb61272dc716(){return handleError((function(e,t){return addHeapObject(getObject(e).createImageBitmap(getObject(t)))}),arguments)}function __wbg_instanceof_WorkerGlobalScope_e34c8a505711a78e(e){let t;try{t=getObject(e)instanceof WorkerGlobalScope}catch(e){t=!1}return t}function __wbg_createImageBitmap_c278e73aea088356(){return handleError((function(e,t){return addHeapObject(getObject(e).createImageBitmap(getObject(t)))}),arguments)}function __wbg_newwithu8clampedarray_6b29095634b7e758(){return handleError((function(e,t,a){return addHeapObject(new ImageData(getClampedArrayU8FromWasm0(e,t),a>>>0))}),arguments)}function __wbg_crypto_1d1f22824a6a080c(e){return addHeapObject(getObject(e).crypto)}function __wbindgen_is_object(e){const t=getObject(e);return"object"==typeof t&&null!==t}function __wbg_process_4a72847cc503995b(e){return addHeapObject(getObject(e).process)}function __wbg_versions_f686565e586dd935(e){return addHeapObject(getObject(e).versions)}function __wbg_node_104a2ff8d6ea03a2(e){return addHeapObject(getObject(e).node)}function __wbindgen_is_string(e){return"string"==typeof getObject(e)}function __wbg_require_cca90b1a94a0255b(){return handleError((function(){return addHeapObject(module.require)}),arguments)}function __wbindgen_is_function(e){return"function"==typeof getObject(e)}function __wbindgen_string_new(e,t){return addHeapObject(getStringFromWasm0(e,t))}function __wbg_msCrypto_eb05e62b530a1508(e){return addHeapObject(getObject(e).msCrypto)}function __wbg_randomFillSync_5c9c955aa56b6049(){return handleError((function(e,t){getObject(e).randomFillSync(takeObject(t))}),arguments)}function __wbg_getRandomValues_3aa56aa6edec874c(){return handleError((function(e,t){getObject(e).getRandomValues(getObject(t))}),arguments)}function __wbg_newnoargs_76313bd6ff35d0f2(e,t){return addHeapObject(new Function(getStringFromWasm0(e,t)))}function __wbg_call_1084a111329e68ce(){return handleError((function(e,t){return addHeapObject(getObject(e).call(getObject(t)))}),arguments)}function __wbindgen_object_clone_ref(e){return addHeapObject(getObject(e))}function __wbg_self_3093d5d1f7bcb682(){return handleError((function(){return addHeapObject(self.self)}),arguments)}function __wbg_window_3bcfc4d31bc012f8(){return handleError((function(){return addHeapObject(window.window)}),arguments)}function __wbg_globalThis_86b222e13bdf32ed(){return handleError((function(){return addHeapObject(globalThis.globalThis)}),arguments)}function __wbg_global_e5a3fe56f8be9485(){return handleError((function(){return addHeapObject(__webpack_require__.g.global)}),arguments)}function __wbindgen_is_undefined(e){return void 0===getObject(e)}function __wbg_eval_6e4fc17d87772f52(){return handleError((function(arg0,arg1){const ret=eval(getStringFromWasm0(arg0,arg1));return addHeapObject(ret)}),arguments)}function __wbg_new_796382978dfd4fb0(e,t){return addHeapObject(new Error(getStringFromWasm0(e,t)))}function __wbg_call_89af060b4e1523f2(){return handleError((function(e,t,a){return addHeapObject(getObject(e).call(getObject(t),getObject(a)))}),arguments)}function __wbg_buffer_b7b08af79b0b0974(e){return addHeapObject(getObject(e).buffer)}function __wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9(e,t,a){return addHeapObject(new Uint8Array(getObject(e),t>>>0,a>>>0))}function __wbg_new_ea1883e1e5e86686(e){return addHeapObject(new Uint8Array(getObject(e)))}function __wbg_set_d1e79e2388520f18(e,t,a){getObject(e).set(getObject(t),a>>>0)}function __wbg_newwithlength_ec548f448387c968(e){return addHeapObject(new Uint8Array(e>>>0))}function __wbg_subarray_7c2e3576afe181d1(e,t,a){return addHeapObject(getObject(e).subarray(t>>>0,a>>>0))}function __wbindgen_throw(e,t){throw new Error(getStringFromWasm0(e,t))}function __wbindgen_memory(){return addHeapObject(wasm.memory)}},466:(e,t,a)=>{var n=a(310);e.exports=a.v(t,e.id,"0ebd0c197345b41c7c27",{"./plasma_web_bg.js":{__wbindgen_object_drop_ref:n.bk,__wbindgen_boolean_get:n.Nh,__wbg_instanceof_Window_5012736c80a01584:n.uw,__wbg_createImageBitmap_b7c7bb61272dc716:n.t5,__wbg_instanceof_WorkerGlobalScope_e34c8a505711a78e:n.X5,__wbg_createImageBitmap_c278e73aea088356:n.zR,__wbg_newwithu8clampedarray_6b29095634b7e758:n.ZY,__wbg_crypto_1d1f22824a6a080c:n.h_,__wbindgen_is_object:n.qv,__wbg_process_4a72847cc503995b:n.cA,__wbg_versions_f686565e586dd935:n.D1,__wbg_node_104a2ff8d6ea03a2:n.NL,__wbindgen_is_string:n.Gu,__wbg_require_cca90b1a94a0255b:n.s,__wbindgen_is_function:n.PR,__wbindgen_string_new:n.yc,__wbg_msCrypto_eb05e62b530a1508:n.cl,__wbg_randomFillSync_5c9c955aa56b6049:n.hW,__wbg_getRandomValues_3aa56aa6edec874c:n.VF,__wbg_newnoargs_76313bd6ff35d0f2:n.xN,__wbg_call_1084a111329e68ce:n.tM,__wbindgen_object_clone_ref:n.BZ,__wbg_self_3093d5d1f7bcb682:n.KN,__wbg_window_3bcfc4d31bc012f8:n.O9,__wbg_globalThis_86b222e13bdf32ed:n.tn,__wbg_global_e5a3fe56f8be9485:n.jF,__wbindgen_is_undefined:n.vU,__wbg_eval_6e4fc17d87772f52:n.Ti,__wbg_new_796382978dfd4fb0:n.EP,__wbg_call_89af060b4e1523f2:n.J1,__wbg_buffer_b7b08af79b0b0974:n.DI,__wbg_newwithbyteoffsetandlength_8a2cb9ca96b27ec9:n.hH,__wbg_new_ea1883e1e5e86686:n.Mq,__wbg_set_d1e79e2388520f18:n.FJ,__wbg_newwithlength_ec548f448387c968:n.OL,__wbg_subarray_7c2e3576afe181d1:n.nq,__wbindgen_throw:n.Qn,__wbindgen_memory:n.Py}})}}]);